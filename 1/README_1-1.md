# [업무 케이스] 대규모 데이터셋 메타데이터 생성 및 배치 최적화

## 1. 배경
- **프로젝트 설명:**  
  사이트 내 전체 만화 및 각 만화별 회차 데이터를 메타데이터로 생성하여 S3와 Mysql DB Table에 저장하는 스케줄링(AWS EventBridg 사용) 배치 작업입니다.
- **문제 상황:**  
  기존에는 20,000개 이상의 데이터를 1개씩 개별 처리하여 생성하였기 때문에, 배치 실행 시간이 약 60초에 달해 시스템 부하 및 비용 측면에서 비효율적이었습니다.
- **작업 기간:**  2023-06 ~ 2023-07

## 2. 사용 기술
- **프로그래밍 언어:** `golang`
- **데이터베이스:** `mysql`
- **AWS 서비스:** `lambda`, `AWS EventBridge` (스케줄링), `S3`, `AWS SAM`
- **처리 방식:** 기존 단일 처리 방식 → CHUNK 방식 (50개씩 일괄 처리)

## 3. 문제 해결 과정
- **문제 진단:**  
  20000 개 이상의 비동기 루틴이 실행되면서 개별 처리 방식으로 인한 병목 현상이 전체 배치 작업의 실행 시간을 길게 만들고 있다는 점을 확인했습니다.
- **해결 전략:**  
  - **일괄 처리 도입:** 20,000개 이상의 데이터를 1개씩 처리하는 대신, 50개씩 묶어(batch chunking) 일괄 데이터 처리를 진행하여 I/O 및 처리 오버헤드를 줄였습니다.
- **구현 및 테스트:**  
  - Golang을 사용하여 CHUNK 처리 로직을 구현하고, 50개씩 데이터를 처리하도록 변경했습니다.  
  - 기존 처리 방식과의 실행시간을 비교 테스트하여 성능 향상을 확인했습니다.  
  - Lambda와 EventBridge를 통한 스케줄링으로 배치 실행의 안정성과 비용 효율성을 추가로 검증했습니다.

## 4. 성과 및 결과
- **실행시간 단축:**  
  배치 작업 실행 시간이 기존 60초에서 28초로 약 53% 단축되어, 시스템 리소스 사용과 비용이 개선되었습니다.
- **시스템 안정성 및 효율성 향상:**  
  일괄 처리 방식 도입으로 데이터 생성 과정의 병목 현상을 해소하여 처리 중 오류 발생 빈도가 줄어들었습니다.
- **비용 절감 효과:**  
  배치 처리 속도 향상으로 인한 Lambda 실행 시간 단축은 전체 운영 비용 감소에 기여했습니다.

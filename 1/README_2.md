# [업무 케이스] 사용자 회차 구매 기록 검색 성능 개선

## 1. 배경
- **프로젝트 설명:**  
  특정 만화에 대해 사용자의 회차 구매 횟수를 조회하는 기능에서, 기존에는 전체 회차 구매 테이블을 대상으로 사용자의 구매 데이터를 일괄 검색하여 데이터를 집계했습니다.
- **문제 상황:**  
  데이터 양이 증가함에 따라, 전체 테이블 검색 방식은 쿼리 속도가 느려지고 시스템 부하가 증가하는 문제를 야기했습니다.

## 2. 사용 기술
- **프로그래밍 언어:** `Node.js`
- **데이터베이스:** `mysql`  

## 3. 문제 해결 과정
- **문제 진단:**  
  전체 회차 구매 테이블에서 데이터를 조회하는 방식이 데이터 증가에 따른 성능 저하의 주 원인임을 확인했습니다.
- **해결 전략:**  
  - **통계 테이블 도입:**  
    만화별 사용자 회차 구매 통계 테이블을 별도로 생성하여, 특정 만화에 대한 사용자 구매 기록을 효과적으로 관리하도록 했습니다.
  - **실시간 동기화 구현:**  
    사용자 구매 액션이 발생할 때, 기존 회차 구매 테이블과 함께 통계 테이블에 데이터를 삽입해 동기화함으로써, 최신 구매 기록을 신속하게 반영했습니다.
- **구현 및 테스트:**  
  - Node.js로 통계 테이블에 데이터를 삽입하는 동기화 로직을 구현했습니다.
  - MySQL 쿼리 최적화를 통해, 통계 테이블 조회 시 검색 성능이 크게 향상되었음을 확인했습니다.
  - 기존 방식과 비교하여, 특정 만화에 대한 사용자 회차 구매 기록 조회 속도 및 시스템 부하 감소 효과를 검증했습니다.

## 4. 성과 및 결과
- **검색 성능 향상:**  
  통계 테이블을 활용하여 특정 만화에 대한 조회 시 쿼리 속도가 크게 개선되었습니다.
- **시스템 부하 감소:**  
  전체 테이블을 검색하는 방식 대신, 통계 테이블 조회로 전환함으로써 데이터 검색량 및 시스템 부하를 대폭 줄였습니다.
- **실시간 동기화 유지:**  
  사용자 구매 액션 발생 시 동기화 로직을 통해 데이터의 최신 상태를 유지함으로써 안정적인 조회 환경을 구현했습니다.

# [프로젝트 사례] Go 기반 Serverless 배치 프로그램 패키지 구조 개선

## 1. 배경
- **프로젝트 설명:**  
  go 언어로 작성된 배치 시스템은 AWS SAM을 이용해 배포되며 serverless lambda 환경에서 동작하고 있었습니다.
- **문제 상황:**  
  기존 프로젝트는 모든 소스코드가 `controller`, `service`, `handler` 등 간단한 패키지 구조로 관리되어, SAM을 통해 람다 함수에 배포 시 전체 소스코드가 패키징되었습니다.  
  이로 인해 배포 파일의 크기가 점점 커지면서(전체 650MB) 배포 및 실행 효율에 문제가 발생할 가능성이 있었습니다.
- **작업 기간:**  
  2023-02 ~ 2023-03

## 2. 사용 기술
- **프로그래밍 언어:** `go`  
- **배포 도구:** `AWS SAM`  
- **실행 환경:** `AWS lambda (serverless)`

## 3. 문제 해결 과정
- **문제 진단:**  
  - 기존 구조에서 단일 패키지로 모든 코드가 관리되어 배포 시 불필요한 파일들이 포함되고 있었음을 확인했습니다.
  - 코드의 모듈화 및 계층 구조가 세분화되지 않아, 관리와 배포 최적화에 한계가 있었습니다.
- **해결 전략:**  
  - **패키지 구조 개선:**  
    소스코드를 더욱 세분화하여 하위 패키지 구조로 재구성하였습니다.  
    예를 들어, 만화 관련 코드는 `handler/comicHandler/comicHandler.go`와 같이 보다 구체적인 디렉토리 구조로 이동시켜, 필요 없는 파일들이 람다 배포 패키지에 포함되지 않도록 했습니다.
  - **불필요한 파일 배제:**  
    필요한 파일만 포함하여 배포할 수 있도록, 프로젝트 내 불필요한 리소스나 코드를 분리했습니다.
- **구현 및 테스트:**  
  - 기존 코드베이스를 재구조화하여, 하위 패키지 별로 명확한 경로를 부여하고, 각 패키지의 역할을 정의하였습니다.
  - 배포 후 실제 배포 파일의 크기가 크게 줄어드는(650MB에서 349MB로 감소) 효과를 검증하였으며, Lambda 함수의 실행 성능 및 리소스 사용 효율성 또한 개선되었음을 확인했습니다.

## 4. 성과 및 결과
- **배포 파일 용량 감소:**  
  패키지 구조 개선을 통해 배포 파일의 크기가 기존 650MB에서 349MB로 대폭 감소, 빠른 배포 및 함수 시작 속도를 달성했습니다.
- **효율적인 리소스 사용:**  
  불필요한 파일 배제를 통해 AWS Lambda 함수의 실행에 필요한 메모리 및 리소스 사용을 최적화하여 안정성을 강화했습니다.
- **유지보수 및 확장성 향상:**  
  코드의 모듈화로 인해, 향후 기능 추가나 변경 시 관리가 용이해졌으며, 다른 모듈로의 확장이 원활하게 이루어질 수 있도록 기반을 마련했습니다.

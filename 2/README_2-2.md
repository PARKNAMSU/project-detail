# [프로젝트 사례] Proxy Module 시스템을 통한 순환 참조 문제 해결

## 1. 배경
- **프로젝트 설명:**  
  Node.js 기반 백엔드 서버에서 모듈 간 순환 참조 문제를 해결하기 위해, proxy module 시스템을 개발하여 서버 안정성과 모듈 간 의존성 관리 효율성을 개선한 작업입니다.
- **문제 상황:**  
  서버는 CommonJS(require 문법)를 사용하며, `controller`, `manager`(비즈니스 로직 담당), `handler`(DB 쿼리 및 기본 기능 계층)로 구성되어 있었습니다.  
  원래 호출 구조는 `controller -> manager -> handler`였으나, 서버 규모 확장으로 인해 `handler -> manager` 호출 구조가 발생하면서 순환 참조 오류가 빈번히 발생했습니다.
- **작업 기간:**  
  2023.03 ~ 2023.04

## 2. 사용 기술
- **프로그래밍 언어:** `node.js`

## 3. 문제 해결 과정
- **문제 진단:**  
  서버의 모듈 간 호출 과정에서 발생하는 순환 참조 문제로 인해, 실행 시 오류가 발생하고 유지보수가 어려워지는 문제가 확인되었습니다.
- **해결 전략:**  
  - **Proxy Module 도입:**  
    서버 실행 시, 순환 참조에 연관된 handler와 manager 모듈들을 proxy module에 등록하여 직접적인 호출 대신 proxy module을 통해 간접적으로 모듈을 참조하도록 설계하였습니다.
  - **구현 방식:**  
    기존의 직접적인 `require` 호출을 proxy module을 통한 간접 호출로 변경함으로써, 모듈 간 순환 의존성을 끊어내고, 각 모듈의 의존성을 중앙 집중적으로 관리할 수 있도록 했습니다.
- **구현 및 테스트:**  
  - 초기 서버 실행 시 proxy module에 관련 모듈들을 등록하고, 각 모듈에서는 직접적으로 require 하지 않고 proxy module을 통해 호출되도록 코드를 재구성하였습니다.
  - 순환 참조 오류가 발생하던 문제를 해결하고, 서버 실행 안정성을 확보하기 위해 다양한 테스트 케이스를 진행했습니다.
  - 코드 리뷰 및 성능 테스트를 통해, 모듈 간 의존성 관리의 효율성이 개선되었음을 확인했습니다.

## 4. 성과 및 결과
- **서버 안정성 개선:**  
  proxy module 도입으로 인해 순환 참조 오류가 제거되어, 서버 실행 안정성이 크게 향상되었습니다.
- **개발 생산성 향상:**  
  순환 참조 문제 해결로 디버깅 및 오류 수정 시간이 단축되어 전체 개발 생산성이 개선되었습니다.
